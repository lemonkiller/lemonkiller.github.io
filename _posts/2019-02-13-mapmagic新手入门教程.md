---
layout:     post
title:      mapmagic新手入门教程
subtitle:   这个插件很棒,自来水一发
date:       2019-02-13
author:     lemonkiller
header-img: \img\mapmagic.jpg
excerpt: 逐渐补完mapmagic的入门教程
catalog: true
tags:
    - unity插件
    - unity
---
## 前言
一直对过程生成游戏内容很感兴趣,之前生啃了这个插件的基本用法

觉得不错,尝试把它介绍给中文世界,也是一次梳理和深入理解

受限于英文水平,也用了些机翻资料..

逐渐补完这篇入门文,大体思路是列出结构,补充细节,调整结构,补充细节,直到完毕这样

可随意转载,但烦请附带原文链接

### MapMagic介绍
这是一个节点式的自动生成unity地形的插件

可以预先生成地形,也可以在运行中生成地形

支持无限大地形
### 和其他插件的比较
![](/img/mapmagic_bijiao.png)
### 不足之处

目前不支持河流和道路的生成



## 用法入门
### 创建地形
### 编辑窗口
### 贴图

### 节点说明
#### 地图生成节点

形象地说，地图是一个单通道的方形光栅图像（如果你更像是一个程序员而不是艺术家，那么二维浮动数组）。所有的地图生成器都由一个原则联合起来：它们的输入和输出连接类型是Map。

大多数生成器使用0  -  1值间隔。例如，在高度输出中，1是设置中定义的最大高度;对于面具0表示完全透明，1  - 完全不透明。

许多Map生成器具有等效参数。为方便起见，将它们统一列在此处，不会再对每个生成器重复说明。有些生成器可以拥有所有这些参数，其他生成器只能拥有其中一些参数，其余的则根本没有。

输入：

    输入 - 生成器要处理的映射。

    蒙版 - 将生成器强度乘以蒙版贴图的值。对于值为0的掩码像素，生成器效果是不可见的，对于值为1的像素，强度不变。

输出：

    输出 - 存储生成器的处理结果，并允许您连接到其他输入。

属性：

    强度 - 生成器对输入映射的影响量。当该值设置为0时，生成器效果不可见。换句话说，它是生成器的有效不透明度。

![](/img/MapMagic/MapAmount.jpg)

安全边框 - 屏蔽地形边界，使边界上的生成器效果为零，并随着距边界的距离而增加。 此参数设置效果的全部强度之前的量（以像素为单位）。 设置为0时，边框遮罩处于关闭状态。 此参数对于更好的地形焊接至关重要，因此如果此生成器输出到高度，则始终启用此参数。
![](/img/MapMagic/MapMaskBorders.jpg)

种子是用于初始化伪随机噪声发生器的数字。 如果两个生成器使用相等的种子数，则生成的模式将是相同的。

- Constant

    创建一个填充给定参数的地图。 这是最简单的生成器，用于创建透明蒙版或平面高度图。

    输出：平面处于一定水平高度。

    属性：地图将在生成时填充此值。 值范围介于0（无填充，透明填充或零地面水平，具体取决于将使用的输出）和1（完全不透明填充或最大地形高度）。

- Noise

    Noise Generator是MapMagic中最基本的生成器之一。 它生成一个柏林噪声图，广泛用作各种地图创建算法的基础。

    输入：

        输入 - 如果未指定输入，则噪声发生器返回纯噪声。 如果指定了输入，则在输入映射上方添加（+）噪声。
        蒙版 - 控制生成器强度水平的地图。

    输出：

        输出 - 噪声图（如果未指定输入）或添加了噪声的输入图（如果指定了输入）。

    属性：

        大小 - 此参数确定最大分形的大小。 高于此值的噪声不再是分形，而是标准的perlin噪声。 较小的尺寸值会产生非常均匀和可预测的噪音，而较高的值会产生不同的噪音和风景高度图。
    ![](/img/MapMagic/NoiseSize.jpg)

- Voronoi

    使用Voronoi模式创建地图。将地图拆分为单元格，为每个单元格生成随机点，并使用到最近点和第二个最近点的评估距离填充地图。 Voronoi地图看起来像一个由不规则凸多边形组成的mosaiс。

    输入：

        输入 - 如果未指定输入，Voronoi生成器将返回纯Voronoi映射。如果指定了输入，则在输入映射上方添加（+）Voronoi效果。
        蒙版 - 控制发电机强度水平的地图。

    输出：

        输出 -  voronoi模式（如果未指定输入）或添加了voronoi模式的输入映射（如果指定了输入）。

    属性：

        类型：确定最终高度的精确计算方式：

        平面：使用单元格点的值填充所有最近的像素
        最近：填充距离最近点值的像素
        第二近似：与最近相同，除了计算到第二个最近点的距离
        蜂窝：到第二个最近点的距离减去到最近点的距离。
        有机：到第二个最近点的距离加上到最近点的距离。
        ![](/img/MapMagic/VoronoiType1.jpg)
        ![](/img/MapMagic/VoronoiType2.jpg)

    细胞计数：细胞数量。 此参数设置Voronoi模式的大小：计数越大，多边形大小越小。 为了更好的地形焊接，建议使用两个电池计数的功率，但这不是强制性的。
    ![](/img/MapMagic/VoronoiCellcount.jpg)



#### 物体生成节点
#### 输出节点
#### 自定义节点 

## 相关链接

unity商店地址:https://assetstore.unity.com/packages/tools/terrain/mapmagic-world-generator-56762

插件主页:http://www.denispahunov.ru/MapMagic/

相关wiki:https://gitlab.com/denispahunov/mapmagic/wikis/home

Unity3d 地形制作交流群:493200979,这个群里用各种地形制作软件的人都有,欢迎加入


